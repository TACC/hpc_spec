#!/bin/bash

DOWNLOAD_DIR=/tmp/fenics-stuff
if [ $# -eq 1 ] ; then
  DOWNLOAD_DIR=$1
fi
echo "Downloading in ${DOWNLOAD_DIR}"

if [ ! -d "${DOWNLOAD_DIR}" ] ; then
  echo "Making download directory: ${DOWNLOAD_DIR}"
  mkdir -p "${DOWNLOAD_DIR}"
fi
cd ${DOWNLOAD_DIR}
echo "Installing in: `pwd`"

rm -rf fiat* instant* dijitso* ufl* ffc* dolfin* mshr* eigen*

# using https on st2
git clone https://bitbucket.org/fenics-project/fiat
git clone https://bitbucket.org/fenics-project/instant
git clone https://bitbucket.org/fenics-project/dijitso
git clone https://bitbucket.org/fenics-project/ufl
git clone https://bitbucket.org/fenics-project/ffc
git clone https://bitbucket.org/fenics-project/dolfin
git clone https://bitbucket.org/fenics-project/mshr
git clone git@bitbucket.org:fenics-project/fenics.git
#module unload python3
#module load python
hg clone https://bitbucket.org/eigen/eigen
#module unload python
#module load python3

tar fcz fenics.tgz fiat instant dijitso ufl ffc dolfin mshr eigen fenics
